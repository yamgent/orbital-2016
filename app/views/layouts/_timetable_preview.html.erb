<table id="timetable-preview">
	<thead>
		<tr>
			<th colspan="1"><div>0800</div></th>
			<% for i in 9..23 do %>
				<th colspan="2"><div><%= sprintf('%02d', i) %>00</div></th>
			<% end %>
			<th colspan="2"><div>0000</div></th>
		</tr>
	</thead>
	
	<tbody>
		<% [ "mon", "tue", "wed", "thu", "fri" ].each do |day| %>
			<tr>
				<th><div><%= day %></div></th>
				<% for i in 8..23 do %>
					<td id="<%= day %>-<%= i %>00"></td>
					<td id="<%= day %>-<%= i %>30"></td>
				<% end %>
			</tr>
		<% end %>
	</tbody>
</table>

<%= javascript_tag do %>

	function GetTimetableInstance() {

		if (!(this instanceof GetTimetableInstance)){
			return new GetTimetableInstance();
		}

		var days = [ "sun", "mon", "tue", "wed", "thu", "fri", "sat" ];
		var $timetable = $( "#timetable-preview" );

		this.addPeriod = function( day, startTime, endTime, code, name, type ) {
			$timetable.find( "#" + days[day] + "-" + startTime ).append(
				$( "<div/>" )
				.addClass( "period color-1 t" + (endTime - startTime) )
				.append( $( "<span/>" ).text( code ) )
				.append( $( "<span/>" ).text( name ) )
				.append( $( "<span/>" ).text( type ) )
			);
			return this;
		};

		this.removePeriod = function( day, startTime ) {
			$timetable.find( "#" + days[day] + "-" + startTime ).empty();
			return this;
		};

		this.removeAllPeriods = function() {
			return this;
		};

	}

<% end %>